<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ª Hola Keiler</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>ğŸ’ª Hola Keiler</h1>

        <!-- CronÃ³metro -->
        <div class="timer-container glass-card">
            <h2>â±ï¸ Tiempo de Entrenamiento</h2>
            <div id="timer">00:00:00</div>
            <div class="timer-buttons">
                <button id="startBtn">Iniciar</button>
                <button id="stopBtn">Detener</button>
                <button id="resetBtn">Reiniciar</button>
            </div>
        </div>

        <!-- Formulario -->
        <form method="POST" enctype="multipart/form-data" class="upload-form glass-card">
            <h2>ğŸ“¤ Subir foto o video</h2>
            <input type="file" name="file" required>
            <select name="category" required>
                <option>Lunes - Espalda y BÃ­ceps</option>
                <option>Miercoles - Piernes y Hombro</option>
                <option>viernes - Pecho y TrÃ­ceps</option>
                <option>Domingo - Abdomen</option>
                
            </select>
            <input type="text" name="reps" placeholder="Repeticiones: 4x12" required>
          
            <button type="submit" class="upload-btn">Subir</button>
        </form>

        <!-- GalerÃ­a -->
        {% for category, items in uploads_by_category.items() %}
        <h2 class="category-title">ğŸ“… {{ category }}</h2>
        <div class="gallery">
            {% for item in items %}
            <div class="card glass-card">
                <form method="POST" action="{{ url_for('delete_file', filename=item.filename) }}" class="delete-form">
                    <button type="submit" class="delete-btn">ğŸ—‘ï¸</button>
                </form>

                {% if item.filename.endswith('.mp4') %}
                <video controls src="{{ url_for('static', filename='uploads/' + item.filename) }}"></video>
                {% else %}
                <img src="{{ url_for('static', filename='uploads/' + item.filename) }}" alt="upload">
                {% endif %}

                <div class="info">
                    <p><b>Reps:</b> {{ item.reps }}</p>
                    <p class="progress">ğŸ’¬ {{ item.progress }}</p>
                    <label class="check-label">
                        <input type="checkbox" class="progress-check"> Ejercicio Completado
                    </label>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

  <!-- ğŸ” Modal de vista ampliada moderna -->
<div id="previewModal" class="modal">
    <div class="modal-content-wrapper">
        <span class="close">&times;</span>
        <img id="modalImage" class="modal-media" alt="">
        <video id="modalVideo" class="modal-media" controls></video>
    </div>
</div>
    <script>
  // === Modal funcional y elegante ===
  const modal = document.getElementById("previewModal");
  const modalImg = document.getElementById("modalImage");
  const modalVideo = document.getElementById("modalVideo");
  const closeModal = document.querySelector(".close");

  // Abrir modal al hacer clic en imagen o video
  document.querySelectorAll(".card img, .card video").forEach(media => {
    media.addEventListener("click", () => {
      modal.style.display = "flex";
      modal.classList.add("show");

      if (media.tagName === "IMG") {
        modalImg.src = media.src;
        modalImg.style.display = "block";
        modalVideo.style.display = "none";
        modalVideo.pause();
      } else {
        modalVideo.src = media.src;
        modalVideo.style.display = "block";
        modalImg.style.display = "none";
      }
    });
  });

  // Cerrar con la X
  closeModal.addEventListener("click", () => {
    modal.classList.remove("show");
    setTimeout(() => {
      modal.style.display = "none";
      modalVideo.pause();
    }, 200);
  });

  // Cerrar haciendo clic fuera del contenido
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.classList.remove("show");
      setTimeout(() => {
        modal.style.display = "none";
        modalVideo.pause();
      }, 200);
    }
  });
</script>
<script>
  let timerInterval;
  let seconds = 0;

  const startBtn = document.getElementById("startBtn");
  const stopBtn = document.getElementById("stopBtn");
  const resetBtn = document.getElementById("resetBtn");
  const timerDisplay = document.getElementById("timer");

  function updateTimerDisplay() {
    const hrs = String(Math.floor(seconds / 3600)).padStart(2, "0");
    const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, "0");
    const secs = String(seconds % 60).padStart(2, "0");
    timerDisplay.textContent = `${hrs}:${mins}:${secs}`;
  }

  startBtn.addEventListener("click", () => {
    if (!timerInterval) {
      timerInterval = setInterval(() => {
        seconds++;
        updateTimerDisplay();
      }, 1000);
    }
  });

  stopBtn.addEventListener("click", () => {
    clearInterval(timerInterval);
    timerInterval = null;
  });

  resetBtn.addEventListener("click", () => {
    clearInterval(timerInterval);
    timerInterval = null;
    seconds = 0;
    updateTimerDisplay();
  });
</script>

</body>
</html>







